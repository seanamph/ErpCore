# SYSA1023 - 工務維修統計報表(報表類型) 開發計劃

## 一、功能概述

### 1.1 功能說明
- **功能代碼**: SYSA1023
- **功能名稱**: 工務維修統計報表(報表類型)
- **功能描述**: 提供工務維修統計報表的查詢功能，支援依報表類型、費用負擔、日期範圍、費用歸屬單位、維保人員、請修類別等條件查詢工務維修統計資訊，支援報表列印與匯出
- **參考舊程式**: 
  - `WEB/IMS_CORE/SYSA000/js/SYSA1023.js` (前端邏輯)
  - `WEB/IMS_CORE/SYSA000/SYSA1023.rdlc` (報表定義)

### 1.2 業務需求
- 支援依報表類型查詢（與SYSA1022的主要差異）
- 支援依費用負擔查詢
- 支援依日期範圍查詢（日統計表起、日統計表迄）
- 支援依費用歸屬單位查詢
- 支援依維保人員查詢
- 支援依請修類別查詢
- 支援報表列印與匯出
- 顯示工務維修統計資訊

---

## 二、資料庫設計 (Schema)

### 2.1 主要資料表
參考 `SYSA1022-工務維修統計報表.md` 的資料表設計，使用相同的資料表結構。

### 2.2 報表資料結構
與 SYSA1022 相同，但需額外包含報表類型欄位。

---

## 三、後端 API 設計

### 3.1 API 端點列表

#### 3.1.1 查詢工務維修統計報表(報表類型)
- **HTTP 方法**: `GET`
- **路徑**: `/api/v1/analysis-reports/sysa1023`
- **說明**: 查詢工務維修統計報表資料（含報表類型）
- **請求參數**:
  ```json
  {
    "reportType": "",
    "belongStatus": "",
    "applyDateB": "2024-01-01",
    "applyDateE": "2024-12-31",
    "belongOrg": "",
    "maintainEmp": "",
    "applyType": "",
    "siteId": "",
    "pageIndex": 1,
    "pageSize": 20
  }
  ```
- **回應格式**: 參考 `SYSA1022-工務維修統計報表.md`，但需包含 `reportType` 欄位

---

## 四、前端 UI 設計

### 4.1 UI 元件設計
參考 `SYSA1022-工務維修統計報表.md` 的 UI 設計，但需新增報表類型選擇欄位。

---

## 五、開發時程

### 5.1 階段一: 資料庫設計 (0.5天)
- [ ] 確認資料表結構（與SYSA1022相同）

### 5.2 階段二: 後端開發 (2.5天)
- [ ] Service 實作（新增報表類型參數）
- [ ] Controller 實作
- [ ] DTO 類別建立
- [ ] 查詢邏輯實作
- [ ] 單元測試

### 5.3 階段三: 前端開發 (2.5天)
- [ ] API 呼叫函數
- [ ] 查詢表單開發（新增報表類型欄位）
- [ ] 報表展示頁面開發
- [ ] 元件測試

### 5.4 階段四: 整合測試 (1天)
- [ ] API 整合測試
- [ ] 端對端測試

### 5.5 階段五: 文件與部署 (0.5天)
- [ ] API 文件更新
- [ ] 使用者手冊

**總計**: 7天

---

## 六、注意事項

### 6.1 業務邏輯
- 報表類型為主要查詢條件，需優先處理
- 其他查詢條件與SYSA1022相同

---

## 七、測試案例

### 7.1 單元測試
- [ ] 查詢工務維修統計報表(報表類型)成功
- [ ] 報表類型條件驗證
- [ ] 其他查詢條件驗證

### 7.2 整合測試
- [ ] 完整查詢流程測試
- [ ] 資料驗證測試

---

## 八、參考資料

### 8.1 舊程式碼
- `WEB/IMS_CORE/SYSA000/js/SYSA1023.js`
- `WEB/IMS_CORE/SYSA000/SYSA1023.rdlc`

### 8.2 相關功能
- `SYSA1022-工務維修統計報表.md` - 類似功能，但無報表類型
- `SYSA1024-工務維修統計報表(其他).md` - 類似功能，但查詢條件不同

---

**文件版本**: v1.0  
**建立日期**: 2024-01-01  
**最後更新**: 2024-01-01

