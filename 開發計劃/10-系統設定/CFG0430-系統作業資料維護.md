# CFG0430 - 系統作業資料維護 開發計劃

## 一、功能概述

### 1.1 功能說明
- **功能代碼**: CFG0430
- **功能名稱**: 系統作業資料維護
- **功能描述**: 提供配置模組系統作業資料的新增、修改、刪除、查詢功能
- **參考舊程式**: 
  - `IMS3/HANSHIN/IMS3/CFG0000/CFG0430_FI1.aspx` (新增)
  - `IMS3/HANSHIN/IMS3/CFG0000/CFG0430_FU1.aspx` (修改)
  - `IMS3/HANSHIN/IMS3/CFG0000/CFG0430_FD.aspx` (刪除)
  - `IMS3/HANSHIN/IMS3/CFG0000/CFG0430_PR.aspx` (報表)

### 1.2 業務需求
- 管理配置模組系統作業資訊
- 支援作業的新增、修改、刪除、查詢
- 與主系統、子系統、按鈕權限系統整合

---

## 二、資料庫設計 (Schema)

### 2.1 主要資料表: `ConfigPrograms`

```sql
CREATE TABLE [dbo].[ConfigPrograms] (
    [ProgramId] NVARCHAR(50) NOT NULL PRIMARY KEY,
    [SystemId] NVARCHAR(50) NOT NULL,
    [SubSystemId] NVARCHAR(50) NULL,
    [ProgramName] NVARCHAR(100) NOT NULL,
    [SeqNo] INT NULL,
    [Status] NVARCHAR(10) NULL DEFAULT 'A',
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    [UpdatedBy] NVARCHAR(50) NULL,
    [UpdatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [PK_ConfigPrograms] PRIMARY KEY CLUSTERED ([ProgramId] ASC),
    CONSTRAINT [FK_ConfigPrograms_ConfigSystems] FOREIGN KEY ([SystemId]) REFERENCES [dbo].[ConfigSystems] ([SystemId]) ON DELETE CASCADE,
    CONSTRAINT [FK_ConfigPrograms_ConfigSubSystems] FOREIGN KEY ([SubSystemId]) REFERENCES [dbo].[ConfigSubSystems] ([SubSystemId]) ON DELETE SET NULL
);
```

---

## 三、後端 API 設計

### 3.1 API 端點
- `GET /api/v1/config/programs` - 查詢作業列表
- `GET /api/v1/config/programs/{programId}` - 查詢單筆作業
- `POST /api/v1/config/programs` - 新增作業
- `PUT /api/v1/config/programs/{programId}` - 修改作業
- `DELETE /api/v1/config/programs/{programId}` - 刪除作業

---

## 四、前端 UI 設計

### 4.1 頁面結構
- 查詢條件區塊：主系統、子系統、作業代碼、作業名稱、狀態
- 資料表格區塊：作業列表表格
- 新增/修改表單：作業資料維護表單

---

## 五、實作細節

### 5.1 後端實作
- Repository: `IConfigProgramRepository` / `ConfigProgramRepository`
- Service: `IConfigProgramService` / `ConfigProgramService`
- Controller: `ConfigProgramController`

### 5.2 前端實作
- API 服務: `configProgramApi.ts`
- 頁面元件: `CFG0430ConfigProgram.vue`

---

## 六、相關文件
- [CFG0410-主系統項目資料維護](./CFG0410-主系統項目資料維護.md)
- [CFG0420-子系統項目資料維護](./CFG0420-子系統項目資料維護.md)
- [SYS0430-系統作業資料維護](../01-系統管理/04-系統設定/SYS0430-系統作業資料維護.md)

