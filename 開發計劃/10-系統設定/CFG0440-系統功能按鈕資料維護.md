# CFG0440 - 系統功能按鈕資料維護 開發計劃

## 一、功能概述

### 1.1 功能說明
- **功能代碼**: CFG0440
- **功能名稱**: 系統功能按鈕資料維護
- **功能描述**: 提供配置模組系統功能按鈕資料的新增、修改、刪除、查詢功能
- **參考舊程式**: 
  - `IMS3/HANSHIN/IMS3/CFG0000/CFG0440_FI1.aspx` (新增)
  - `IMS3/HANSHIN/IMS3/CFG0000/CFG0440_FU1.aspx` (修改)
  - `IMS3/HANSHIN/IMS3/CFG0000/CFG0440_FD.aspx` (刪除)
  - `IMS3/HANSHIN/IMS3/CFG0000/CFG0440_PR.aspx` (報表)

### 1.2 業務需求
- 管理配置模組系統功能按鈕資訊
- 支援按鈕的新增、修改、刪除、查詢
- 與主系統、子系統、作業權限系統整合

---

## 二、資料庫設計 (Schema)

### 2.1 主要資料表: `ConfigButtons`

```sql
CREATE TABLE [dbo].[ConfigButtons] (
    [ButtonId] NVARCHAR(50) NOT NULL PRIMARY KEY,
    [ProgramId] NVARCHAR(50) NOT NULL,
    [ButtonName] NVARCHAR(100) NOT NULL,
    [ButtonType] NVARCHAR(20) NULL,
    [SeqNo] INT NULL,
    [Status] NVARCHAR(10) NULL DEFAULT 'A',
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    [UpdatedBy] NVARCHAR(50) NULL,
    [UpdatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [PK_ConfigButtons] PRIMARY KEY CLUSTERED ([ButtonId] ASC),
    CONSTRAINT [FK_ConfigButtons_ConfigPrograms] FOREIGN KEY ([ProgramId]) REFERENCES [dbo].[ConfigPrograms] ([ProgramId]) ON DELETE CASCADE
);
```

---

## 三、後端 API 設計

### 3.1 API 端點
- `GET /api/v1/config/buttons` - 查詢按鈕列表
- `GET /api/v1/config/buttons/{buttonId}` - 查詢單筆按鈕
- `POST /api/v1/config/buttons` - 新增按鈕
- `PUT /api/v1/config/buttons/{buttonId}` - 修改按鈕
- `DELETE /api/v1/config/buttons/{buttonId}` - 刪除按鈕

---

## 四、前端 UI 設計

### 4.1 頁面結構
- 查詢條件區塊：主系統、子系統、作業、按鈕代碼、按鈕名稱、狀態
- 資料表格區塊：按鈕列表表格
- 新增/修改表單：按鈕資料維護表單

---

## 五、實作細節

### 5.1 後端實作
- Repository: `IConfigButtonRepository` / `ConfigButtonRepository`
- Service: `IConfigButtonService` / `ConfigButtonService`
- Controller: `ConfigButtonController`

### 5.2 前端實作
- API 服務: `configButtonApi.ts`
- 頁面元件: `CFG0440ConfigButton.vue`

---

## 六、相關文件
- [CFG0410-主系統項目資料維護](./CFG0410-主系統項目資料維護.md)
- [CFG0420-子系統項目資料維護](./CFG0420-子系統項目資料維護.md)
- [CFG0430-系統作業資料維護](./CFG0430-系統作業資料維護.md)
- [SYS0440-系統功能按鈕資料維護](../01-系統管理/04-系統設定/SYS0440-系統功能按鈕資料維護.md)

