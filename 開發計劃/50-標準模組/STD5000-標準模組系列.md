# STD5000 - 標準模組系列 開發計劃

## 一、功能概述

### 1.1 功能說明
- **功能代碼**: STD5000 系列
- **功能名稱**: 標準模組系列（零售管理系統）
- **功能描述**: 提供完整的零售管理系統功能，包含基礎資料管理、會員管理、交易管理、店鋪管理、商品管理、報表等功能模組
- **參考舊程式**: 
  - `WEB/IMS_CORE/ASP/STD5000/SYS51XX_*.ASP` (基礎資料管理)
  - `WEB/IMS_CORE/ASP/STD5000/SYS52XX_*.ASP` (會員管理)
  - `WEB/IMS_CORE/ASP/STD5000/SYS53XX_*.ASP` (交易管理)
  - `WEB/IMS_CORE/ASP/STD5000/SYS54XX_*.ASP` (店鋪管理)
  - `WEB/IMS_CORE/ASP/STD5000/SYS55XX_*.ASP` (商品管理)
  - `WEB/IMS_CORE/ASP/STD5000/SYS56XX_*.ASP` (報表模組)

### 1.2 業務需求
- **SYS51XX 系列（基礎資料管理）**: 提供基礎資料的新增、修改、刪除、查詢功能
- **SYS52XX 系列（會員管理）**: 提供會員資料、積分、交易記錄等管理功能
- **SYS53XX 系列（交易管理）**: 提供銷售、退貨、調整等交易管理功能
- **SYS54XX 系列（店鋪管理）**: 提供店鋪資料、配置、報表等功能
- **SYS55XX 系列（商品管理）**: 提供商品資料、庫存、價格、促銷等功能
- **SYS56XX 系列（報表模組）**: 提供各種報表查詢和列印功能

### 1.3 子模組清單
- **SYS5110-SYS5150**: 基礎資料維護（瀏覽、新增、修改、刪除、查詢、報表）
- **SYS5210-SYS52A0**: 會員管理（會員資料、積分、優惠券、報表）
- **SYS5310-SYS53C6**: 交易管理（銷售、退貨、調整、報表）
- **SYS5410-SYS5491**: 店鋪管理（店鋪資料、配置、報表）
- **SYS5510-SYS55E1**: 商品管理（商品資料、庫存、價格、促銷、報表）
- **SYS5610-SYS56B0**: 報表查詢和列印

---

## 二、資料庫設計 (Schema)

### 2.1 基礎資料管理相關資料表

#### 2.1.1 `BaseData` - 基礎資料主檔
```sql
CREATE TABLE [dbo].[BaseData] (
    [TKey] BIGINT NOT NULL PRIMARY KEY IDENTITY(1,1),
    [DataId] NVARCHAR(50) NOT NULL, -- 資料代碼
    [DataName] NVARCHAR(100) NOT NULL, -- 資料名稱
    [DataType] NVARCHAR(20) NOT NULL, -- 資料類型 (SYS5110, SYS5120, SYS5130, SYS5140, SYS5150)
    [Status] NVARCHAR(10) NOT NULL DEFAULT 'A', -- 狀態 (A:啟用, I:停用)
    [Memo] NVARCHAR(500) NULL, -- 備註
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    [UpdatedBy] NVARCHAR(50) NULL,
    [UpdatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [UQ_BaseData_DataId_DataType] UNIQUE ([DataId], [DataType])
);

CREATE NONCLUSTERED INDEX [IX_BaseData_DataType] ON [dbo].[BaseData] ([DataType]);
CREATE NONCLUSTERED INDEX [IX_BaseData_Status] ON [dbo].[BaseData] ([Status]);
```

### 2.2 會員管理相關資料表

#### 2.2.1 `Members` - 會員主檔
```sql
CREATE TABLE [dbo].[Members] (
    [TKey] BIGINT NOT NULL PRIMARY KEY IDENTITY(1,1),
    [MemberId] NVARCHAR(50) NOT NULL, -- 會員編號
    [MemberName] NVARCHAR(100) NOT NULL, -- 會員姓名
    [MemberType] NVARCHAR(20) NULL, -- 會員類型
    [IdCard] NVARCHAR(20) NULL, -- 身分證字號
    [Phone] NVARCHAR(20) NULL, -- 電話
    [Email] NVARCHAR(100) NULL, -- 電子郵件
    [Address] NVARCHAR(200) NULL, -- 地址
    [BirthDate] DATETIME2 NULL, -- 生日
    [JoinDate] DATETIME2 NOT NULL DEFAULT GETDATE(), -- 加入日期
    [Points] DECIMAL(18, 4) NULL DEFAULT 0, -- 積分
    [Status] NVARCHAR(10) NOT NULL DEFAULT 'A', -- 狀態 (A:啟用, I:停用)
    [ShopId] NVARCHAR(50) NULL, -- 店別代碼
    [Memo] NVARCHAR(500) NULL, -- 備註
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    [UpdatedBy] NVARCHAR(50) NULL,
    [UpdatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [UQ_Members_MemberId] UNIQUE ([MemberId])
);

CREATE NONCLUSTERED INDEX [IX_Members_MemberType] ON [dbo].[Members] ([MemberType]);
CREATE NONCLUSTERED INDEX [IX_Members_Status] ON [dbo].[Members] ([Status]);
CREATE NONCLUSTERED INDEX [IX_Members_ShopId] ON [dbo].[Members] ([ShopId]);
```

#### 2.2.2 `MemberPoints` - 會員積分明細
```sql
CREATE TABLE [dbo].[MemberPoints] (
    [TKey] BIGINT NOT NULL PRIMARY KEY IDENTITY(1,1),
    [MemberId] NVARCHAR(50) NOT NULL, -- 會員編號
    [TransDate] DATETIME2 NOT NULL, -- 交易日期
    [TransType] NVARCHAR(20) NOT NULL, -- 交易類型 (EARN:獲得, USE:使用, EXPIRE:過期)
    [Points] DECIMAL(18, 4) NOT NULL, -- 積分數量
    [TransId] NVARCHAR(50) NULL, -- 交易單號
    [Memo] NVARCHAR(500) NULL, -- 備註
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [FK_MemberPoints_Members] FOREIGN KEY ([MemberId]) REFERENCES [dbo].[Members] ([MemberId]) ON DELETE CASCADE
);

CREATE NONCLUSTERED INDEX [IX_MemberPoints_MemberId] ON [dbo].[MemberPoints] ([MemberId]);
CREATE NONCLUSTERED INDEX [IX_MemberPoints_TransDate] ON [dbo].[MemberPoints] ([TransDate]);
```

### 2.3 交易管理相關資料表

#### 2.3.1 `Transactions` - 交易主檔
```sql
CREATE TABLE [dbo].[Transactions] (
    [TKey] BIGINT NOT NULL PRIMARY KEY IDENTITY(1,1),
    [TransId] NVARCHAR(50) NOT NULL, -- 交易單號
    [TransDate] DATETIME2 NOT NULL, -- 交易日期
    [TransType] NVARCHAR(20) NOT NULL, -- 交易類型 (SALE:銷售, RETURN:退貨, ADJUST:調整)
    [ShopId] NVARCHAR(50) NOT NULL, -- 店別代碼
    [MemberId] NVARCHAR(50) NULL, -- 會員編號
    [TotalAmount] DECIMAL(18, 4) NOT NULL DEFAULT 0, -- 總金額
    [TotalQty] DECIMAL(18, 4) NOT NULL DEFAULT 0, -- 總數量
    [Status] NVARCHAR(10) NOT NULL DEFAULT 'A', -- 狀態 (A:正常, X:取消)
    [Memo] NVARCHAR(500) NULL, -- 備註
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    [UpdatedBy] NVARCHAR(50) NULL,
    [UpdatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [UQ_Transactions_TransId] UNIQUE ([TransId])
);

CREATE NONCLUSTERED INDEX [IX_Transactions_TransDate] ON [dbo].[Transactions] ([TransDate]);
CREATE NONCLUSTERED INDEX [IX_Transactions_ShopId] ON [dbo].[Transactions] ([ShopId]);
CREATE NONCLUSTERED INDEX [IX_Transactions_MemberId] ON [dbo].[Transactions] ([MemberId]);
CREATE NONCLUSTERED INDEX [IX_Transactions_TransType] ON [dbo].[Transactions] ([TransType]);
```

#### 2.3.2 `TransactionDetails` - 交易明細
```sql
CREATE TABLE [dbo].[TransactionDetails] (
    [TKey] BIGINT NOT NULL PRIMARY KEY IDENTITY(1,1),
    [TransId] NVARCHAR(50) NOT NULL, -- 交易單號
    [LineNum] INT NOT NULL, -- 行號
    [GoodsId] NVARCHAR(50) NOT NULL, -- 商品編號
    [Qty] DECIMAL(18, 4) NOT NULL, -- 數量
    [UnitPrice] DECIMAL(18, 4) NOT NULL, -- 單價
    [Amount] DECIMAL(18, 4) NOT NULL, -- 金額
    [Discount] DECIMAL(18, 4) NULL DEFAULT 0, -- 折扣
    [Memo] NVARCHAR(500) NULL, -- 備註
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [FK_TransactionDetails_Transactions] FOREIGN KEY ([TransId]) REFERENCES [dbo].[Transactions] ([TransId]) ON DELETE CASCADE
);

CREATE NONCLUSTERED INDEX [IX_TransactionDetails_TransId] ON [dbo].[TransactionDetails] ([TransId]);
CREATE NONCLUSTERED INDEX [IX_TransactionDetails_GoodsId] ON [dbo].[TransactionDetails] ([GoodsId]);
```

### 2.4 店鋪管理相關資料表

#### 2.4.1 `Shops` - 店鋪主檔
```sql
CREATE TABLE [dbo].[Shops] (
    [TKey] BIGINT NOT NULL PRIMARY KEY IDENTITY(1,1),
    [ShopId] NVARCHAR(50) NOT NULL, -- 店別代碼
    [ShopName] NVARCHAR(100) NOT NULL, -- 店別名稱
    [ShopType] NVARCHAR(20) NULL, -- 店別類型
    [Address] NVARCHAR(200) NULL, -- 地址
    [Phone] NVARCHAR(20) NULL, -- 電話
    [ManagerId] NVARCHAR(50) NULL, -- 店長代碼
    [Status] NVARCHAR(10) NOT NULL DEFAULT 'A', -- 狀態 (A:啟用, I:停用)
    [Memo] NVARCHAR(500) NULL, -- 備註
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    [UpdatedBy] NVARCHAR(50) NULL,
    [UpdatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [UQ_Shops_ShopId] UNIQUE ([ShopId])
);

CREATE NONCLUSTERED INDEX [IX_Shops_Status] ON [dbo].[Shops] ([Status]);
```

### 2.5 商品管理相關資料表

#### 2.5.1 `Goods` - 商品主檔
```sql
CREATE TABLE [dbo].[Goods] (
    [TKey] BIGINT NOT NULL PRIMARY KEY IDENTITY(1,1),
    [GoodsId] NVARCHAR(50) NOT NULL, -- 商品編號
    [GoodsName] NVARCHAR(100) NOT NULL, -- 商品名稱
    [GoodsType] NVARCHAR(20) NULL, -- 商品類型
    [CategoryId] NVARCHAR(50) NULL, -- 分類代碼
    [UnitId] NVARCHAR(50) NULL, -- 單位代碼
    [CostPrice] DECIMAL(18, 4) NULL, -- 成本價
    [SalePrice] DECIMAL(18, 4) NULL, -- 售價
    [Status] NVARCHAR(10) NOT NULL DEFAULT 'A', -- 狀態 (A:啟用, I:停用)
    [Memo] NVARCHAR(500) NULL, -- 備註
    [CreatedBy] NVARCHAR(50) NULL,
    [CreatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    [UpdatedBy] NVARCHAR(50) NULL,
    [UpdatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [UQ_Goods_GoodsId] UNIQUE ([GoodsId])
);

CREATE NONCLUSTERED INDEX [IX_Goods_GoodsType] ON [dbo].[Goods] ([GoodsType]);
CREATE NONCLUSTERED INDEX [IX_Goods_CategoryId] ON [dbo].[Goods] ([CategoryId]);
CREATE NONCLUSTERED INDEX [IX_Goods_Status] ON [dbo].[Goods] ([Status]);
```

#### 2.5.2 `GoodsInventory` - 商品庫存
```sql
CREATE TABLE [dbo].[GoodsInventory] (
    [TKey] BIGINT NOT NULL PRIMARY KEY IDENTITY(1,1),
    [GoodsId] NVARCHAR(50) NOT NULL, -- 商品編號
    [ShopId] NVARCHAR(50) NOT NULL, -- 店別代碼
    [Qty] DECIMAL(18, 4) NOT NULL DEFAULT 0, -- 庫存數量
    [SafetyQty] DECIMAL(18, 4) NULL DEFAULT 0, -- 安全庫存
    [UpdatedBy] NVARCHAR(50) NULL,
    [UpdatedAt] DATETIME2 NOT NULL DEFAULT GETDATE(),
    CONSTRAINT [FK_GoodsInventory_Goods] FOREIGN KEY ([GoodsId]) REFERENCES [dbo].[Goods] ([GoodsId]) ON DELETE CASCADE,
    CONSTRAINT [UQ_GoodsInventory_GoodsId_ShopId] UNIQUE ([GoodsId], [ShopId])
);

CREATE NONCLUSTERED INDEX [IX_GoodsInventory_ShopId] ON [dbo].[GoodsInventory] ([ShopId]);
```

---

## 三、後端 API 設計

### 3.1 基礎資料管理 API (SYS51XX 系列)

#### 3.1.1 查詢基礎資料列表
```http
GET /api/v1/std5000/basedata?dataType={dataType}&page={page}&pageSize={pageSize}
```

**請求參數**:
- `dataType`: 資料類型 (SYS5110, SYS5120, SYS5130, SYS5140, SYS5150)
- `page`: 頁碼
- `pageSize`: 每頁筆數

**回應格式**:
```json
{
  "success": true,
  "code": 200,
  "message": "查詢成功",
  "data": {
    "items": [
      {
        "tKey": 1,
        "dataId": "DATA001",
        "dataName": "資料名稱",
        "dataType": "SYS5110",
        "status": "A",
        "memo": "備註"
      }
    ],
    "total": 100,
    "page": 1,
    "pageSize": 20
  }
}
```

#### 3.1.2 新增基礎資料
```http
POST /api/v1/std5000/basedata
```

**請求體**:
```json
{
  "dataId": "DATA001",
  "dataName": "資料名稱",
  "dataType": "SYS5110",
  "status": "A",
  "memo": "備註"
}
```

#### 3.1.3 修改基礎資料
```http
PUT /api/v1/std5000/basedata/{tKey}
```

**請求體**:
```json
{
  "dataName": "修改後的資料名稱",
  "status": "I",
  "memo": "修改備註"
}
```

#### 3.1.4 刪除基礎資料
```http
DELETE /api/v1/std5000/basedata/{tKey}
```

#### 3.1.5 查詢單筆基礎資料
```http
GET /api/v1/std5000/basedata/{tKey}
```

### 3.2 會員管理 API (SYS52XX 系列)

#### 3.2.1 查詢會員列表
```http
GET /api/v1/std5000/members?memberType={memberType}&status={status}&page={page}&pageSize={pageSize}
```

#### 3.2.2 新增會員
```http
POST /api/v1/std5000/members
```

**請求體**:
```json
{
  "memberId": "M001",
  "memberName": "會員姓名",
  "memberType": "VIP",
  "idCard": "A123456789",
  "phone": "0912345678",
  "email": "member@example.com",
  "address": "地址",
  "birthDate": "1990-01-01",
  "shopId": "SHOP001",
  "status": "A"
}
```

#### 3.2.3 修改會員
```http
PUT /api/v1/std5000/members/{tKey}
```

#### 3.2.4 刪除會員
```http
DELETE /api/v1/std5000/members/{tKey}
```

#### 3.2.5 查詢會員積分明細
```http
GET /api/v1/std5000/members/{memberId}/points?startDate={startDate}&endDate={endDate}
```

#### 3.2.6 調整會員積分
```http
POST /api/v1/std5000/members/{memberId}/points/adjust
```

**請求體**:
```json
{
  "points": 100,
  "transType": "EARN",
  "memo": "積分調整"
}
```

### 3.3 交易管理 API (SYS53XX 系列)

#### 3.3.1 查詢交易列表
```http
GET /api/v1/std5000/transactions?transType={transType}&shopId={shopId}&startDate={startDate}&endDate={endDate}&page={page}&pageSize={pageSize}
```

#### 3.3.2 新增交易
```http
POST /api/v1/std5000/transactions
```

**請求體**:
```json
{
  "transDate": "2024-01-01",
  "transType": "SALE",
  "shopId": "SHOP001",
  "memberId": "M001",
  "details": [
    {
      "goodsId": "G001",
      "qty": 2,
      "unitPrice": 100,
      "amount": 200
    }
  ],
  "memo": "交易備註"
}
```

#### 3.3.3 修改交易
```http
PUT /api/v1/std5000/transactions/{transId}
```

#### 3.3.4 取消交易
```http
POST /api/v1/std5000/transactions/{transId}/cancel
```

#### 3.3.5 查詢交易明細
```http
GET /api/v1/std5000/transactions/{transId}/details
```

### 3.4 店鋪管理 API (SYS54XX 系列)

#### 3.4.1 查詢店鋪列表
```http
GET /api/v1/std5000/shops?status={status}&page={page}&pageSize={pageSize}
```

#### 3.4.2 新增店鋪
```http
POST /api/v1/std5000/shops
```

#### 3.4.3 修改店鋪
```http
PUT /api/v1/std5000/shops/{tKey}
```

#### 3.4.4 刪除店鋪
```http
DELETE /api/v1/std5000/shops/{tKey}
```

### 3.5 商品管理 API (SYS55XX 系列)

#### 3.5.1 查詢商品列表
```http
GET /api/v1/std5000/goods?goodsType={goodsType}&categoryId={categoryId}&status={status}&page={page}&pageSize={pageSize}
```

#### 3.5.2 新增商品
```http
POST /api/v1/std5000/goods
```

**請求體**:
```json
{
  "goodsId": "G001",
  "goodsName": "商品名稱",
  "goodsType": "NORMAL",
  "categoryId": "CAT001",
  "unitId": "UNIT001",
  "costPrice": 50,
  "salePrice": 100,
  "status": "A"
}
```

#### 3.5.3 修改商品
```http
PUT /api/v1/std5000/goods/{tKey}
```

#### 3.5.4 刪除商品
```http
DELETE /api/v1/std5000/goods/{tKey}
```

#### 3.5.5 查詢商品庫存
```http
GET /api/v1/std5000/goods/{goodsId}/inventory?shopId={shopId}
```

#### 3.5.6 調整商品庫存
```http
POST /api/v1/std5000/goods/{goodsId}/inventory/adjust
```

**請求體**:
```json
{
  "shopId": "SHOP001",
  "qty": 10,
  "adjustType": "IN",
  "memo": "庫存調整"
}
```

### 3.6 報表查詢 API (SYS56XX 系列)

#### 3.6.1 查詢銷售報表
```http
GET /api/v1/std5000/reports/sales?shopId={shopId}&startDate={startDate}&endDate={endDate}
```

#### 3.6.2 查詢會員報表
```http
GET /api/v1/std5000/reports/members?startDate={startDate}&endDate={endDate}
```

#### 3.6.3 查詢商品報表
```http
GET /api/v1/std5000/reports/goods?shopId={shopId}&startDate={startDate}&endDate={endDate}
```

#### 3.6.4 匯出報表
```http
POST /api/v1/std5000/reports/export
```

**請求體**:
```json
{
  "reportType": "SALES",
  "format": "EXCEL",
  "parameters": {
    "shopId": "SHOP001",
    "startDate": "2024-01-01",
    "endDate": "2024-01-31"
  }
}
```

---

## 四、前端 UI 設計

### 4.1 基礎資料管理頁面 (SYS51XX)

#### 4.1.1 基礎資料列表頁面
- **路由**: `/std5000/basedata`
- **組件**: `BaseDataList.vue`
- **功能**:
  - 資料類型下拉選單（SYS5110, SYS5120, SYS5130, SYS5140, SYS5150）
  - 狀態篩選（啟用/停用）
  - 關鍵字搜尋
  - 資料表格顯示（資料代碼、資料名稱、狀態、備註）
  - 新增、修改、刪除按鈕
  - 分頁控制

#### 4.1.2 基礎資料維護對話框
- **組件**: `BaseDataDialog.vue`
- **表單欄位**:
  - 資料代碼（新增時必填，修改時唯讀）
  - 資料名稱（必填）
  - 資料類型（下拉選單，新增時必填）
  - 狀態（下拉選單：啟用/停用）
  - 備註（文字區域）

### 4.2 會員管理頁面 (SYS52XX)

#### 4.2.1 會員列表頁面
- **路由**: `/std5000/members`
- **組件**: `MemberList.vue`
- **功能**:
  - 會員類型篩選
  - 狀態篩選
  - 關鍵字搜尋（會員編號、姓名、電話）
  - 會員表格顯示
  - 新增、修改、刪除按鈕
  - 查看積分明細按鈕
  - 積分調整按鈕

#### 4.2.2 會員維護對話框
- **組件**: `MemberDialog.vue`
- **表單欄位**:
  - 會員編號（新增時必填，修改時唯讀）
  - 會員姓名（必填）
  - 會員類型（下拉選單）
  - 身分證字號
  - 電話
  - 電子郵件
  - 地址
  - 生日（日期選擇器）
  - 店別代碼（下拉選單）
  - 狀態（下拉選單）

#### 4.2.3 會員積分明細頁面
- **路由**: `/std5000/members/:memberId/points`
- **組件**: `MemberPoints.vue`
- **功能**:
  - 會員基本資訊顯示
  - 積分明細表格（交易日期、交易類型、積分數量、備註）
  - 日期範圍篩選
  - 積分調整按鈕

### 4.3 交易管理頁面 (SYS53XX)

#### 4.3.1 交易列表頁面
- **路由**: `/std5000/transactions`
- **組件**: `TransactionList.vue`
- **功能**:
  - 交易類型篩選（銷售/退貨/調整）
  - 店別篩選
  - 日期範圍篩選
  - 交易表格顯示
  - 新增、修改、取消按鈕
  - 查看明細按鈕

#### 4.3.2 交易維護對話框
- **組件**: `TransactionDialog.vue`
- **表單欄位**:
  - 交易單號（新增時自動產生，修改時唯讀）
  - 交易日期（日期選擇器，必填）
  - 交易類型（下拉選單：銷售/退貨/調整）
  - 店別代碼（下拉選單，必填）
  - 會員編號（下拉選單）
  - 交易明細表格（商品編號、數量、單價、金額）
  - 總金額（自動計算）
  - 備註

### 4.4 店鋪管理頁面 (SYS54XX)

#### 4.4.1 店鋪列表頁面
- **路由**: `/std5000/shops`
- **組件**: `ShopList.vue`
- **功能**:
  - 狀態篩選
  - 關鍵字搜尋
  - 店鋪表格顯示
  - 新增、修改、刪除按鈕

#### 4.4.2 店鋪維護對話框
- **組件**: `ShopDialog.vue`
- **表單欄位**:
  - 店別代碼（新增時必填，修改時唯讀）
  - 店別名稱（必填）
  - 店別類型（下拉選單）
  - 地址
  - 電話
  - 店長代碼（下拉選單）
  - 狀態（下拉選單）

### 4.5 商品管理頁面 (SYS55XX)

#### 4.5.1 商品列表頁面
- **路由**: `/std5000/goods`
- **組件**: `GoodsList.vue`
- **功能**:
  - 商品類型篩選
  - 分類篩選
  - 狀態篩選
  - 關鍵字搜尋
  - 商品表格顯示
  - 新增、修改、刪除按鈕
  - 查看庫存按鈕

#### 4.5.2 商品維護對話框
- **組件**: `GoodsDialog.vue`
- **表單欄位**:
  - 商品編號（新增時必填，修改時唯讀）
  - 商品名稱（必填）
  - 商品類型（下拉選單）
  - 分類代碼（下拉選單）
  - 單位代碼（下拉選單）
  - 成本價
  - 售價
  - 狀態（下拉選單）

#### 4.5.3 商品庫存頁面
- **路由**: `/std5000/goods/:goodsId/inventory`
- **組件**: `GoodsInventory.vue`
- **功能**:
  - 商品基本資訊顯示
  - 各店別庫存表格
  - 庫存調整按鈕

### 4.6 報表查詢頁面 (SYS56XX)

#### 4.6.1 報表查詢頁面
- **路由**: `/std5000/reports`
- **組件**: `ReportQuery.vue`
- **功能**:
  - 報表類型選擇（銷售報表/會員報表/商品報表）
  - 查詢條件設定（店別、日期範圍等）
  - 報表結果顯示
  - 匯出按鈕（Excel/PDF）

---

## 五、開發時程

### 階段一：基礎架構（2週）
- 資料庫設計與建立
- 後端專案結構建立
- 前端專案結構建立
- 基礎API框架建立

### 階段二：基礎資料管理（1週）
- SYS51XX 系列功能開發
- 基礎資料CRUD功能
- 基礎資料查詢與報表

### 階段三：會員管理（2週）
- SYS52XX 系列功能開發
- 會員資料維護
- 會員積分管理
- 會員報表

### 階段四：交易管理（2週）
- SYS53XX 系列功能開發
- 交易資料維護
- 交易明細管理
- 交易報表

### 階段五：店鋪管理（1週）
- SYS54XX 系列功能開發
- 店鋪資料維護
- 店鋪報表

### 階段六：商品管理（2週）
- SYS55XX 系列功能開發
- 商品資料維護
- 商品庫存管理
- 商品報表

### 階段七：報表模組（1週）
- SYS56XX 系列功能開發
- 各種報表查詢
- 報表匯出功能

### 階段八：測試與優化（1週）
- 單元測試
- 整合測試
- 效能優化
- 文件整理

**總計**: 約 12 週

---

## 六、注意事項

### 6.1 資料一致性
- 交易資料與庫存資料需保持一致性
- 會員積分調整需記錄完整歷史
- 商品價格變更需記錄變更歷史

### 6.2 權限控制
- 基礎資料維護需系統管理員權限
- 交易取消需特定權限
- 庫存調整需特定權限

### 6.3 效能考量
- 大量資料查詢需使用分頁
- 報表查詢需使用背景處理
- 庫存查詢需使用快取機制

### 6.4 資料備份
- 交易資料需定期備份
- 會員資料需定期備份
- 庫存資料需定期備份

---

## 七、測試案例

### 7.1 基礎資料管理測試
- **測試案例1**: 新增基礎資料
  - 輸入：資料代碼、資料名稱、資料類型
  - 預期：成功新增並顯示在列表中
- **測試案例2**: 修改基礎資料
  - 輸入：修改資料名稱和狀態
  - 預期：成功修改並更新顯示
- **測試案例3**: 刪除基礎資料
  - 輸入：選擇要刪除的資料
  - 預期：成功刪除並從列表中移除

### 7.2 會員管理測試
- **測試案例1**: 新增會員
  - 輸入：會員編號、姓名、類型等
  - 預期：成功新增會員
- **測試案例2**: 會員積分調整
  - 輸入：會員編號、積分數量、調整類型
  - 預期：成功調整積分並記錄歷史

### 7.3 交易管理測試
- **測試案例1**: 新增交易
  - 輸入：交易日期、類型、店別、明細
  - 預期：成功新增交易並更新庫存
- **測試案例2**: 取消交易
  - 輸入：交易單號
  - 預期：成功取消交易並恢復庫存

### 7.4 商品管理測試
- **測試案例1**: 新增商品
  - 輸入：商品編號、名稱、價格等
  - 預期：成功新增商品
- **測試案例2**: 庫存調整
  - 輸入：商品編號、店別、調整數量
  - 預期：成功調整庫存並記錄歷史

---

## 八、參考資料

### 8.1 舊程式參考
- `WEB/IMS_CORE/ASP/STD5000/SYS5110_*.ASP` - 基礎資料管理
- `WEB/IMS_CORE/ASP/STD5000/SYS5210_*.ASP` - 會員管理
- `WEB/IMS_CORE/ASP/STD5000/SYS5310_*.ASP` - 交易管理
- `WEB/IMS_CORE/ASP/STD5000/SYS5410_*.ASP` - 店鋪管理
- `WEB/IMS_CORE/ASP/STD5000/SYS5510_*.ASP` - 商品管理
- `WEB/IMS_CORE/ASP/STD5000/SYS5610_*.ASP` - 報表模組

### 8.2 相關文件
- 系統架構分析.md - STD5000 目錄分析
- 目錄掃描狀態統計.md - STD5000 模組狀態

### 8.3 技術文件
- .NET Core 8.0 API 開發指南
- Vue 3 開發指南
- Dapper 使用手冊
- SQL Server 資料庫設計指南

