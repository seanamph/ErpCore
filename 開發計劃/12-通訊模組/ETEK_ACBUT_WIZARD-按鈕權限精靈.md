# ETEK_ACBUT_WIZARD - 按鈕權限精靈 開發計劃

## 一、功能概述

### 1.1 功能說明
- **功能代碼**: ETEK_ACBUT_WIZARD
- **功能名稱**: 按鈕權限精靈
- **功能描述**: 提供系統權限產生精靈功能，用於自動產生按鈕權限的SQL腳本
- **參考舊程式**: 
  - `WEB/IMS_CORE/ASP/XCOM000/ETEK_ACBUT_WIZARD.asp`

### 1.2 業務需求
- 自動產生按鈕權限的SQL腳本
- 支援作業代碼輸入
- 產生INSERT語句用於權限設定
- 與權限系統整合

---

## 二、資料庫設計 (Schema)

此功能主要用於產生SQL腳本，不涉及新的資料表設計，使用現有的權限相關資料表。

---

## 三、後端 API 設計

### 3.1 API 端點列表

#### 3.1.1 產生按鈕權限SQL腳本
- **HTTP 方法**: `POST`
- **路徑**: `/api/v1/etek/acbut-wizard/generate`
- **說明**: 根據作業代碼產生按鈕權限的SQL腳本
- **請求格式**:
  ```json
  {
    "progId": "SYS0110"
  }
  ```
- **回應格式**:
  ```json
  {
    "success": true,
    "code": 200,
    "message": "產生成功",
    "data": {
      "sqlScript": "INSERT INTO MNG_BUTTON (...) VALUES (...);\n..."
    },
    "timestamp": "2024-01-01T00:00:00Z"
  }
  ```

---

## 四、前端 UI 設計

### 4.1 頁面結構

#### 4.1.1 按鈕權限精靈頁面 (`AcbutWizard.vue`)
- **路徑**: `/xcom/etek/acbut-wizard`
- **功能**: 輸入作業代碼，產生按鈕權限SQL腳本
- **主要元件**:
  - 作業代碼輸入表單 (ProgIdForm)
  - SQL腳本顯示區域 (SqlScriptDisplay)

---

## 五、開發時程

### 5.1 階段一: 後端開發 (2天)
- [ ] Service 實作
- [ ] Controller 實作
- [ ] SQL腳本產生邏輯
- [ ] 單元測試

### 5.2 階段二: 前端開發 (1天)
- [ ] API 呼叫函數
- [ ] 精靈頁面開發
- [ ] SQL腳本顯示元件

### 5.3 階段三: 整合測試 (0.5天)
- [ ] API 整合測試
- [ ] 功能測試

**總計**: 3.5天

---

## 六、注意事項

### 6.1 安全性
- 必須驗證作業代碼的合法性
- 必須檢查使用者權限

### 6.2 業務邏輯
- 必須檢查作業是否存在
- 必須檢查按鈕資料是否存在
- 產生的SQL腳本必須符合SQL Server語法

---

## 七、參考資料

### 7.1 舊程式碼
- `WEB/IMS_CORE/ASP/XCOM000/ETEK_ACBUT_WIZARD.asp`

---

**文件版本**: v1.0  
**建立日期**: 2024-01-01  
**最後更新**: 2024-01-01

